!function(t){function e(i){if(o[i])return o[i].exports;var n=o[i]={exports:{},id:i,loaded:!1};return t[i].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var o={};return e.m=t,e.c=o,e.p="",e(0)}([function(t,e,o){"use strict";var i,n,s,r,a,h,c;a=o(2),n=o(5),i=function(t){return document.getElementById(t)},s=i("app"),r=i("bundle"),h=s.dataset.env,c=r.dataset.server,o(19),a.render(n({env:h,server:c}),s)},function(t){t.exports={eventType:{stand:0,crwalk:1,run:2,jump:3,attack:4},textures:{baseUrl:"static/textures/",items:{dirt:"dirt-512.jpg",grass:"grass-512.jpg",heightMap:"height_map_1024.png",rock:"rock-512.jpg",sand:"sand-512.jpg",skyBox:["front.jpg","back.jpg","up.jpg","down.jpg","right.jpg","left.jpg"],snow:"snow-512.jpg",wall:"wall.JPG",woodCrate:"crate.gif",metal:"metal.jpg",step:"step.jpg",mud:"mud.jpg"}},models:{ratamahatta:{baseUrl:"static/textures/ratamahatta",body:"ratamahatta.json",skins:["ratamahatta.png"],weapons:[["weapon.json","weapon.png"]]}},playGround:{containers:{items:[{mesh:"containerBox",position:[350,30,350],rotation:[0,0,0],castShadow:!0},{mesh:"containerBox",position:[-250,30,-340],rotation:[0,0,0],castShadow:!0},{mesh:"containerBox",position:[-352,30,0],rotation:[0,0,0],castShadow:!0},{mesh:"containerBox",position:[-352,90,0],rotation:[0,0,0],castShadow:!0},{mesh:"containerBox",position:[-292,30,0],rotation:[0,0,0],castShadow:!0,receiveShadow:!0},{mesh:"containerBox",position:[-412,30,0],rotation:[0,0,0],castShadow:!0},{mesh:"containerBox",position:[-352,90,120],rotation:[0,0,0]},{mesh:"containerBox",position:[-412,30,120],rotation:[0,0,0],castShadow:!0},{mesh:"containerBox",position:[-292,30,180],rotation:[0,0,0],castShadow:!0},{mesh:"containerBox",position:[-337,30,-90],rotation:[0,1.5707963267948966,0],castShadow:!0},{mesh:"containerBox",position:[337,30,165],rotation:[0,0,0],castShadow:!0},{mesh:"containerBox",position:[337,90,165],rotation:[0,0,0],castShadow:!0},{mesh:"containerBox",position:[397,30,165],rotation:[0,0,0],castShadow:!0},{mesh:"containerBox",position:[455,30,-50],rotation:[0,1.5707963267948966,0],castShadow:!0},{mesh:"containerBox",position:[200,30,228],rotation:[0,0,0],castShadow:!0},{mesh:"containerBox",position:[-50,30,-182],rotation:[0,1.5707963267948966,0],castShadow:!0}]},fortress:{items:[{position:[387,30,-437],mesh:"rockBox",castShadow:!0,receiveShadow:!0},{position:[467,7.5,-357],mesh:"stepBox",castShadow:!0,receiveShadow:!0},{position:[467,22.5,-357],mesh:"stepBox",castShadow:!0,receiveShadow:!0},{position:[467,37.5,-357],mesh:"stepBox",castShadow:!0,receiveShadow:!0},{position:[467,7.5,-347],mesh:"stepBox",castShadow:!0,receiveShadow:!0},{position:[467,22.5,-347],mesh:"stepBox",castShadow:!0,receiveShadow:!0},{position:[467,7.5,-337],mesh:"stepBox",castShadow:!0,receiveShadow:!0},{position:[277,67.5,-367],mesh:"stepBox",castShadow:!0,receiveShadow:!0},{position:[337,67.5,-367],mesh:"stepBox",castShadow:!0,receiveShadow:!0},{position:[397,67.5,-367],mesh:"stepBox",castShadow:!0,receiveShadow:!0}]},prison:{items:[{mesh:"groundPlane",position:[0,0,0],rotation:[-1.5707963267948966,0,0],receiveShadow:!0},{mesh:"wallPlane",position:[0,64,-512],rotation:[0,0,0],receiveShadow:!0},{mesh:"wallPlane",position:[-500,64,0],rotation:[0,1.5707963267948966,0],castShadow:!0,receiveShadow:!0},{mesh:"wallPlane",position:[512,64,0],rotation:[0,-1.5707963267948966,0],receiveShadow:!0},{mesh:"wallPlane",position:[0,64,512],rotation:[0,3.141592653589793,0],receiveShadow:!0,castShadow:!0}]},pyramid:{position:[150,0,-100],items:[{mesh:"woodenBox",position:[15,22.5,0],castShadow:!0,receiveShadow:!0},{mesh:"woodenBox",position:[0,22.5,15],castShadow:!0,receiveShadow:!0},{mesh:"woodenBox",position:[15,22.5,15],castShadow:!0,receiveShadow:!0},{mesh:"woodenBox",position:[0,22.5,-15],castShadow:!0,receiveShadow:!0},{mesh:"woodenBox",position:[-15,22.5,0],castShadow:!0,receiveShadow:!0},{mesh:"woodenBox",position:[-15,22.5,-15],castShadow:!0,receiveShadow:!0},{mesh:"woodenBox",position:[-15,22.5,15],castShadow:!0,receiveShadow:!0},{mesh:"woodenBox",position:[15,22.5,-15],castShadow:!0,receiveShadow:!0},{mesh:"woodenBox",position:[-30,7.5,30],castShadow:!0,receiveShadow:!0},{mesh:"woodenBox",position:[-30,7.5,-30],castShadow:!0,receiveShadow:!0},{mesh:"woodenBox",position:[30,7.5,-30],castShadow:!0,receiveShadow:!0},{mesh:"woodenBox",position:[30,7.5,30],castShadow:!0,receiveShadow:!0},{mesh:"woodenBox",position:[15,7.5,30],castShadow:!0,receiveShadow:!0},{mesh:"woodenBox",position:[0,7.5,30],castShadow:!0,receiveShadow:!0},{mesh:"woodenBox",position:[-15,7.5,30],castShadow:!0,receiveShadow:!0},{mesh:"woodenBox",position:[30,7.5,15],castShadow:!0,receiveShadow:!0},{mesh:"woodenBox",position:[30,7.5,0],castShadow:!0,receiveShadow:!0},{mesh:"woodenBox",position:[30,7.5,-15],castShadow:!0,receiveShadow:!0},{mesh:"woodenBox",position:[-30,7.5,-15],castShadow:!0,receiveShadow:!0},{mesh:"woodenBox",position:[-30,7.5,0],castShadow:!0,receiveShadow:!0},{mesh:"woodenBox",position:[-30,7.5,15],castShadow:!0,receiveShadow:!0},{mesh:"woodenBox",position:[-15,7.5,-30],castShadow:!0,receiveShadow:!0},{mesh:"woodenBox",position:[0,7.5,-30],castShadow:!0,receiveShadow:!0},{mesh:"woodenBox",position:[15,7.5,-30],castShadow:!0,receiveShadow:!0},{mesh:"woodenBox",position:[0,37.5,0],castShadow:!0,receiveShadow:!0}]},crates:{items:[{mesh:"woodenBox",position:[497,15,497],scale:[2,2,2]},{mesh:"woodenBox",position:[497,45,497],scale:[2,2,2]},{mesh:"woodenBox",position:[467,15,497],scale:[2,2,2]},{mesh:"woodenBox",position:[467,15,437],scale:[2,2,2]},{mesh:"woodenBox",position:[327,15,437],scale:[2,2,2]},{mesh:"woodenBox",position:[227,15,437],scale:[2,2,2]},{mesh:"woodenBox",position:[127,15,437],scale:[2,2,2]},{mesh:"woodenBox",position:[27,15,437],scale:[2,2,2]},{mesh:"woodenBox",position:[-27,15,437],scale:[2,2,2]},{mesh:"woodenBox",position:[-127,15,437],scale:[2,2,2]},{mesh:"woodenBox",position:[-127,15,200],scale:[2,2,2],castShadow:!0},{mesh:"woodenBox",position:[-127,15,-350],scale:[2,2,2],castShadow:!0},{mesh:"woodenBox",position:[-307,75,0],scale:[2,2,2],castShadow:!0},{mesh:"woodenBox",position:[365,15,275],scale:[2,2,2]}]},smallCrates:{items:[{mesh:"woodenBox",position:[-254.5,7.5,0],castShadow:!0},{mesh:"woodenBox",position:[-254.5,22.5,0],castShadow:!0},{mesh:"woodenBox",position:[-254.5,37.5,0],castShadow:!0},{mesh:"woodenBox",position:[-239.5,7.5,0],castShadow:!0},{mesh:"woodenBox",position:[-239.5,22.5,0],castShadow:!0},{mesh:"woodenBox",position:[-224.5,7.5,0],castShadow:!0},{mesh:"woodenBox",position:[238,7.5,278],castShadow:!0},{mesh:"woodenBox",position:[238,22.5,278],castShadow:!0},{mesh:"woodenBox",position:[238,37.5,278],castShadow:!0},{mesh:"woodenBox",position:[253,7.5,278],castShadow:!0},{mesh:"woodenBox",position:[253,22.5,278],castShadow:!0},{mesh:"woodenBox",position:[268,7.5,278],castShadow:!0}]}},respawns:[{position:[-279,60,426],rotation:-1.57},{position:[100,0,0],rotation:0},{position:[0,0,300],rotation:0},{position:[243,0,-493],rotation:3.14},{position:[-357,0,96],rotation:3.14},{position:[497,0,465],rotation:0},{position:[-470,0,-481],rotation:3.14},{position:[-464,0,115],rotation:0},{position:[-185,0,479],rotation:0},{position:[498,0,-46],rotation:0},{position:[341,120,200],rotation:1.57},{position:[-46,60,-180],rotation:-1.57},{position:[474,60,-466],rotation:1.57}],ui:{crosshair:"static/ui/crosshair.png"}}},function(t){t.exports=React},function(t){var e;e=function(){function t(){}return t.prototype.register=function(t){var e,o;for(o in t)e=t[o],this[o]=e;return this._registered=!0},t}(),t.exports=e},function(t,e,o){var i,n,s,r,a,h,c,p=function(t,e){function o(){this.constructor=t}for(var i in e)d.call(e,i)&&(t[i]=e[i]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},d={}.hasOwnProperty,u=function(t,e){return function(){return t.apply(e,arguments)}};c=o(14),n=function(t){function e(t,o,i,n){this.width=t,this.height=o,this.depth=i,this.color=n,e.__super__.constructor.call(this,new THREE.BoxGeometry(this.width,this.height,this.depth),new THREE.MeshBasicMaterial({color:this.color}))}return p(e,t),e}(THREE.Mesh),h=function(t){function e(t,o,i,n,s,r,a){this.width=t,this.height=o,this.depth=i,s&&(n.wrapS=n.wrapT=THREE.RepeatWrapping,n.repeat.set(r,a)),e.__super__.constructor.call(this,new THREE.BoxGeometry(this.width,this.height,this.depth),new THREE.MeshPhongMaterial({map:n,specular:1118481,shininess:50,metal:!0}))}return p(e,t),e}(THREE.Mesh),a=function(t){function e(t,o,i,n){var s;this.width=t,this.height=o,this.depth=i,s=THREE.ShaderLib.cube,s.uniforms.tCube.value=n,e.__super__.constructor.call(this,new THREE.BoxGeometry(this.width,this.height,this.depth),new THREE.ShaderMaterial({fragmentShader:s.fragmentShader,vertexShader:s.vertexShader,uniforms:s.uniforms,depthWrite:!1,side:THREE.BackSide}))}return p(e,t),e}(THREE.Mesh),r=function(t){function e(t,o,i,n,s){i.wrapS=i.wrapT=THREE.RepeatWrapping,i.repeat.set(n,s),e.__super__.constructor.call(this,new THREE.PlaneBufferGeometry(t,o),new THREE.MeshLambertMaterial({map:i}))}return p(e,t),e}(THREE.Mesh),i=function(t){function e(t,o,i,n,s){var r,a;this.scene=t,this.objects=n,null==s&&(s={}),this.destroy=u(this.destroy,this),this.move=u(this.move,this),this.speed=s.speed||20,a=s.size||1,r=s.color||"white",e.__super__.constructor.call(this,new THREE.SphereGeometry(a,15,15),new THREE.MeshBasicMaterial({color:r})),this.position.copy(o),this.direction=this.getDirection(i),this.rayCaster=new THREE.Raycaster,this.rayCaster.far=this.speed,this.rayCaster.ray.direction.copy(this.direction)}return p(e,t),e.prototype.died=!1,e.prototype.getDirection=function(t){var e,o,i;return e=-Math.sin(t.y),o=Math.sin(t.x),i=-Math.cos(t.y),new THREE.Vector3(e,o,i)},e.prototype.move=function(){var t,e;if(!this.died)return this.position.x+=this.direction.x*this.speed,this.position.y+=this.direction.y*this.speed,this.position.z+=this.direction.z*this.speed,this.rayCaster.ray.origin.copy(this.position),t=this.rayCaster.intersectObjects(this.objects),t.length>0?(e=t[0].object,e instanceof THREE.MorphAnimMesh&&"function"==typeof this.killed&&this.killed(e),this.destroy()):void 0},e.prototype.destroy=function(){return this.died?void 0:(this.died=!0,this.scene.remove(this))},e.prototype.fire=function(t){return this.killed=t,this.scene.add(this),setInterval(this.move,16),setTimeout(this.destroy,2e3)},e}(THREE.Mesh),s=function(t){function e(t,o,i,n){var s,r,a,h,c,p;null==n&&(n=200),a=i.heightMap,a.wrapS=a.wrapT=THREE.RepeatWrapping,s=i.dirt,s.wrapS=s.wrapT=THREE.RepeatWrapping,c=i.sand,c.wrapS=c.wrapT=THREE.RepeatWrapping,r=i.grass,r.wrapS=r.wrapT=THREE.RepeatWrapping,h=i.rock,h.wrapS=h.wrapT=THREE.RepeatWrapping,p=i.snow,p.wrapS=p.wrapT=THREE.RepeatWrapping,e.__super__.constructor.call(this,new THREE.PlaneBufferGeometry(t,o,100,100),new THREE.ShaderMaterial({uniforms:{heightMap:{type:"t",value:a},scale:{type:"f",value:n},dirtTexture:{type:"t",value:s},sandyTexture:{type:"t",value:c},grassTexture:{type:"t",value:r},rockyTexture:{type:"t",value:h},snowyTexture:{type:"t",value:p}},vertexShader:this.vertexShader,fragmentShader:this.fragmentShader}))}return p(e,t),e.prototype.vertexShader="uniform sampler2D heightMap;\nuniform float scale;\n\nvarying float vAmount;\nvarying vec2 vUV;\n\nvoid main()\n{\n  vUV = uv;\n  vec4 img = texture2D(heightMap, uv);\n\n  // assuming map is grayscale it doesn't matter if you use r, g, or b.\n  vAmount = img.r;\n\n  // move the position along the normal\n  vec3 newPosition = position + normal * scale * vAmount;\n\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(newPosition, 1.0);\n}",e.prototype.fragmentShader="uniform sampler2D dirtTexture;\nuniform sampler2D sandyTexture;\nuniform sampler2D grassTexture;\nuniform sampler2D rockyTexture;\nuniform sampler2D snowyTexture;\n\nvarying vec2 vUV;\n\nvarying float vAmount;\n\nvoid main()\n{\n  vec4 dirt = (smoothstep(0.01, 0.05, vAmount) - smoothstep(0.02, 0.26, vAmount)) * texture2D( dirtTexture, vUV * 10.0 );\n  vec4 sand = (smoothstep(0.08, 0.27, vAmount) - smoothstep(0.30, 0.33, vAmount)) * texture2D( sandyTexture, vUV * 10.0 );\n  vec4 grass = (smoothstep(0.30, 0.33, vAmount) - smoothstep(0.34, 0.35, vAmount)) * texture2D( grassTexture, vUV * 20.0 );\n  vec4 rock = (smoothstep(0.30, 0.38, vAmount) - smoothstep(0.65, 0.75, vAmount)) * texture2D( rockyTexture, vUV * 20.0 );\n  vec4 snow = (smoothstep(0.65, 0.75, vAmount))                                   * texture2D( snowyTexture, vUV * 10.0 );\n\n  gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0) + dirt + sand + grass + rock + snow;\n}",e}(THREE.Mesh),t.exports={ColorCube:n,Plane:r,SkyBox:a,HeightMap:s,Bullet:i,TexturedCube:h}},function(t,e,o){var i,n,s,r,a,h,c,p;a=o(2),n=o(6),s=o(7),h=o(8),p=o(1),r=a.addons.PureRenderMixin,c=a.DOM.div,i=a.createClass({mixins:[r],LOADING:0,INITIATING:1,MENU:2,PLAYING:3,textures:{},player:{},getInitialState:function(){return{next:this.LOADING,ammo:10,windowWidth:window.innerWidth,windowHeight:window.innerHeight}},handleResize:function(){return this.setState({windowWidth:window.innerWidth,windowHeight:window.innerHeight})},handleLoading:function(t,e,o){return e===o&&this.state.next===this.LOADING?this.setState({next:this.INITIATING},this.init):void 0},handleClick:function(t){return"blocker"!==t.target.id||this.player.fired||this.state.ammo<=0?void 0:this.setState({ammo:this.state.ammo-1},function(t){return function(){var e;return t.player.fired=!0,t.state.next===t.PLAYING&&t.player.onFire(),e=function(){return t.player.fired=!1,t.player.onStopFire()},setTimeout(e,1120)}}(this))},handleBlockerState:function(t){return this.setState({next:t?this.PLAYING:this.MENU})},init:function(){var t,e;return e=p.respawns,t=e[Math.floor(Math.random()*e.length)],this.player.position=function(t,e,o){o.prototype=t.prototype;var i=new o,n=t.apply(i,e);return Object(n)===n?n:i}(THREE.Vector3,t.position,function(){}),this.player.rotation=new THREE.Vector3(0,t.rotation),this.setState({next:this.MENU})},componentWillMount:function(){var t,e,o,i,n,s,r;THREE.DefaultLoadingManager.onProgress=this.handleLoading,t=p.textures.baseUrl,r=p.textures.items,s=[];for(i in r)e=r[i],"string"==typeof e?s.push(this.textures[i]=new THREE.ImageUtils.loadTexture(t+e)):(o=function(){var o,i,s;for(s=[],o=0,i=e.length;i>o;o++)n=e[o],s.push(t+n);return s}(),s.push(this.textures[i]=new THREE.ImageUtils.loadTextureCube(o)));return s},componentDidMount:function(){return window.addEventListener("resize",this.handleResize)},componentWillUnmount:function(){return window.removeEventListener("resize",this.handleResize)},render:function(){return this.state.next===this.LOADING||this.state.next===this.INITIATING?c({id:"loading"},"Loading..."):c({id:"wrapper",onClick:this.handleClick},h({ammo:this.state.ammo,width:this.state.windowWidth,height:this.state.windowHeight,playing:this.state.next===this.PLAYING}),n({sendState:this.handleBlockerState}),s({width:this.state.windowWidth,height:this.state.windowHeight,playing:this.state.next===this.PLAYING,dataServer:this.props.server,player:this.player,textures:this.textures}))}}),t.exports=a.createFactory(i)},function(t,e,o){var i,n,s,r,a,h;s=o(2),n=s.addons.PureRenderMixin,a=s.DOM,r=a.div,h=a.span,i=s.createClass({mixins:[n],locked:!1,getInitialState:function(){return{pointerLocked:!1}},handleClick:function(){var t;if(!this.locked&&this.havePointerLock)return t=this.refs.blocker.getDOMNode(),t.requestPointerLock=t.requestPointerLock||t.mozRequestPointerLock||t.webkitRequestPointerLock,t.requestPointerLock()},handleLockChange:function(){var t,e;return t=this.refs.blocker.getDOMNode(),e=document.pointerLockElement===t||document.mozPointerLockElement===t||document.webkitPointerLockElement===t,this.locked!==e?(this.locked=e,this.setState({pointerLocked:e}),this.props.sendState(e)):void 0},componentDidMount:function(){return this.havePointerLock?(document.addEventListener("pointerlockchange",this.handleLockChange),document.addEventListener("mozpointerlockchange",this.handleLockChange),document.addEventListener("webkitpointerlockchange",this.handleLockChange)):void 0},componentWillUnmount:function(){return this.havePointerLock?(document.removeEventListener("pointerlockchange",this.handleLockChange),document.removeEventListener("mozpointerlockchange",this.handleLockChange),document.removeEventListener("webkitpointerlockchange",this.handleLockChange)):void 0},render:function(){var t,e;return this.havePointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,this.havePointerLock?(e="Click to play",t="(W, A, S, D = Move, SPACE = Jump, MOUSE = Look around)"):(e="Sorry",t="Your browser doesn't seem to support Pointer Lock API"),r({id:"blocker",ref:"blocker",onClick:this.handleClick,style:{opacity:+!this.state.pointerLocked}},r({id:"instructions"},h({},e),h({},t)))}}),t.exports=s.createFactory(i)},function(t,e,o){var i,n,s,r,a,h,c,p,d;c=o(2),n=o(9),i=o(4).Bullet,a=o(11),r=o(10),p=o(13),h=c.addons.PureRenderMixin,d=c.DOM.canvas,s=c.createClass({mixins:[h],players:{},clock:new THREE.Clock,controls:new n,playGround:new a,lights:new r,sockets:new p,getInitialState:function(){return{frameCount:0}},handleMouseMove:function(t){return this.props.playing?this.controls.handleMouseMove(t):void 0},resetFrameCount:function(){return setTimeout(this.resetFrameCount,1e3),this.fps=this.state.frameCount,this.setState({frameCount:0})},initScene:function(){return this.scene=new THREE.Scene,this.camera=new THREE.PerspectiveCamera(45,this.props.width/this.props.height,1,1e4),this.renderer=new THREE.WebGLRenderer({canvas:this.refs.render.getDOMNode(),antialias:!1,precision:"mediump"}),this.renderer.setSize(this.props.width,this.props.height),this.renderer.shadowMapEnabled=!0,this.playGround.register({scene:this.scene}),this.lights.register({scene:this.scene}),this.sockets.register({controls:this.controls,playGround:this.playGround,players:this.players,scene:this.scene}),this.controls.register({camera:this.camera,playGround:this.playGround,players:this.players,scene:this.scene,sockets:this.sockets}),this.playGround.init(this.props.textures),this.lights.init(),this.sockets.init(this.props.dataServer),this.controls.init(this.props.player)},renderFrame:function(){var t,e,o,i;t=this.clock.getDelta(),this.controls.update(t,this.props.playing),i=this.players;for(e in i)o=i[e],o.update(t);return this.renderer.render(this.scene,this.camera)},animate:function(){return this.setState({frameCount:++this.state.frameCount}),this.renderFrame(),requestAnimationFrame(this.animate)},componentDidMount:function(){return this.resetFrameCount(),this.initScene(),window.addEventListener("mousemove",this.handleMouseMove),this.animate()},componentWillUpdate:function(){return this.width!==this.props.width||this.height!==this.props.height?(this.width=this.props.width,this.height=this.props.height,this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.width,this.height)):void 0},componentWillUnmount:function(){return window.removeEventListener("mousemove",this.handleMouseMove)},render:function(){return d({id:"render",ref:"render"})}}),t.exports=c.createFactory(s)},function(t,e,o){var i,n,s,r,a,h,c;s=o(2),c=o(1),n=s.addons.PureRenderMixin,h=s.DOM.div,i=s.createFactory(s.createClass({mixins:[n],crosshairUrl:c.ui.crosshair,render:function(){return h({id:"crosshair",style:{top:this.props.height/2-43,left:this.props.width/2-43,opacity:this.props.playing?1:0,backgroundImage:"url('"+this.crosshairUrl+"')"}})}})),a=s.createFactory(s.createClass({mixins:[n],getDefaultProps:function(){return{top:"auto",left:"auto",right:"auto",bottom:"auto"}},render:function(){var t,e;return t=this.props.count||this.props.defaultCount,e={top:this.props.top,left:this.props.left,right:this.props.right,bottom:this.props.bottom},h({className:"ui-box",style:e},h({},this.props.title),h({},t))}})),r=s.createClass({mixins:[n],render:function(){return h({id:"ui"},i({width:this.props.width,height:this.props.height,playing:this.props.playing}),a({defaultCount:100,title:"Hitpoints",left:0,bottom:0}),a({defaultCount:0,count:this.props.ammo,title:"Ammo",right:0,bottom:0}))}}),t.exports=s.createFactory(r)},function(t,e,o){var i,n,s,r,a=function(t,e){return function(){return t.apply(e,arguments)}},h=function(t,e){function o(){this.constructor=t}for(var i in e)c.call(e,i)&&(t[i]=e[i]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},c={}.hasOwnProperty;r=o(17),i=o(3),n=o(4).Bullet,s=function(t){function e(){return this.handleFire=a(this.handleFire,this),e.__super__.constructor.apply(this,arguments)}return h(e,t),e.prototype.defaultHeight=12,e.prototype.defaultSpeed=10,e.prototype.rayCaster=new THREE.Raycaster,e.prototype.velocity=new THREE.Vector3,e.prototype.animation="stand",e.prototype.fired=!1,e.prototype.jumped=!1,e.prototype.moved=!1,e.prototype.sprinted=!1,e.prototype.intersects=[],e.prototype.directions={axe:new THREE.Vector3(0,1,0),"default":new THREE.Vector3(0,0,1),down:new THREE.Vector3(0,-1,0)},e.prototype.init=function(t){return this.cameraPitch=this.camera,this.cameraYaw=new THREE.Object3D,this.cameraYaw.add(this.cameraPitch),t.position.y+=this.defaultHeight,t.onFire=this.handleFire,t.onStopFire=function(t){return function(){return t.fired=!1}}(this),this.cameraYaw.position.copy(t.position),this.cameraYaw.rotation.y=t.rotation.y,this.updateProps(),this.scene.add(this.cameraYaw)},e.prototype.updateProps=function(){var t,e;return this.position=this.cameraYaw.position,t=this.cameraPitch.rotation._x,e=this.cameraYaw.rotation._y,this.rotation=new THREE.Vector3(t,e),this.animation="stand",this.moved&&(this.animation="crwalk"),this.jumped&&(this.animation="jump"),this.moved&&this.sprinted&&(this.animation="run"),this.fired?this.animation="attack":void 0},e.prototype.getCamera=function(){return this.cameraYaw},e.prototype.getIntersect=function(t,e){var o;return null==e&&(e=1/0),this.rayCaster.set(this.cameraYaw.position,t),this.rayCaster.far=e,o=this.rayCaster.intersectObjects(this.playGround.meshes),o.length>0?o[0]:!1},e.prototype.update=function(t,e){var o,i,n,s,a,h,c,p,d,u,l,m,w,f;if(e){for(this.updateProps(),this.velocity.y-=9.823*t,w=r.isPressed("W"),m=r.isPressed("S"),u=r.isPressed("A"),l=r.isPressed("D"),this.moved=w||m||u||l,this.sprinted=r.shift,f=this.sprinted?2*this.defaultSpeed:this.defaultSpeed,n=this.getIntersect(this.directions.down,1e3).distance,this.height=Math.abs(Math.round(this.position.y-n))+this.defaultHeight,o=Math.PI/4,i=this.directions["default"].clone().applyAxisAngle(this.directions.axe,this.rotation.y),this.intersects[0]=!!this.getIntersect(i,f),a=s=1;7>=s;a=++s)i=i.applyAxisAngle(this.directions.axe,o),this.intersects[a]=!!this.getIntersect(i,f);return h=this.intersects[7]||this.intersects[0]||this.intersects[1],d=this.intersects[1]||this.intersects[2]||this.intersects[3],c=this.intersects[3]||this.intersects[4]||this.intersects[5],p=this.intersects[5]||this.intersects[6]||this.intersects[7],this.moved&&(w&&!c&&(this.velocity.z-=f*t),m&&!h&&(this.velocity.z+=f*t),u&&!p&&(this.velocity.x-=f*t),l&&!d&&(this.velocity.x+=f*t)),r.isPressed("space")&&(this.jumped||(this.velocity.y+=3),this.jumped=!0),this.cameraYaw.translateX(this.velocity.x),this.cameraYaw.translateY(this.velocity.y),this.cameraYaw.translateZ(this.velocity.z),this.cameraYaw.position.y<this.height&&(this.jumped=!1,this.velocity.y=0,this.cameraYaw.position.y=this.height),this.velocity.x-=this.velocity.x*this.defaultSpeed*t,this.velocity.z-=this.velocity.z*this.defaultSpeed*t}},e.prototype.handleFire=function(){var t;return this.fired=!0,t=new n(this.scene,this.position,this.rotation,this.playGround.meshes),t.fire(function(t){return function(e){var o,i,n,s,r,a,h;h=e.uuid,r=t.players,a=[];for(o in r){if(s=r[o],i=s.meshBody,n=s.meshWeapon,h===i.uuid||h===n.uuid){t.sockets.sendKill(o);break}a.push(void 0)}return a}}(this))},e.prototype.handleMouseMove=function(t){var e,o;return e=t.movementX||t.mozMovementX||t.webkitMovementX||0,o=t.movementY||t.mozMovementY||t.webkitMovementY||0,this.cameraYaw.rotation.y-=.002*e,this.cameraPitch.rotation.x-=.002*o,this.cameraPitch.rotation.x=Math.max(-Math.PI/2,Math.min(Math.PI/2,this.cameraPitch.rotation.x))},e}(i),t.exports=s},function(t,e,o){var i,n,s=function(t,e){function o(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},r={}.hasOwnProperty;i=o(3),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.init=function(){return this.ambientLight=new THREE.AmbientLight(4210752),this.directionalLight=new THREE.DirectionalLight(16777215,1),this.directionalLight.position.set(-520,520,1e3),this.directionalLight.castShadow=!0,this.directionalLight.shadowCameraLeft=-720,this.directionalLight.shadowCameraRight=700,this.directionalLight.shadowCameraBottom=-300,this.directionalLight.shadowCameraNear=550,this.directionalLight.shadowCameraFar=1850,this.scene.add(this.ambientLight),this.scene.add(this.directionalLight)},e}(i),t.exports=n},function(t,e,o){var i,n,s,r,a,h,c,p=function(t,e){function o(){this.constructor=t}for(var i in e)d.call(e,i)&&(t[i]=e[i]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},d={}.hasOwnProperty;i=o(3),c=o(4),n=c.Plane,a=c.TexturedCube,r=c.SkyBox,h=o(1).playGround,s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.meshes=[],e.prototype.objects=[],e.prototype.init=function(t){var e,o,i,s,c,p,d,u,l,m,w,f,y,v,g,x,S,E,k;e={groundPlane:new n(1024,1024,t.grass,16,16),wallPlane:new n(1024,128,t.wall,16,2),woodenBox:new THREE.Mesh(new THREE.BoxGeometry(15,15,15),new THREE.MeshLambertMaterial({map:t.woodCrate})),containerBox:new a(60,60,120,t.metal,!0,2,1),rockBox:new a(250,60,150,t.rock,!0,12,5),stepBox:new a(30,15,10,t.step,!0,1,1)},f={containers:new THREE.Object3D,crates:new THREE.Object3D,fortress:new THREE.Object3D,prison:new THREE.Object3D,pyramid:new THREE.Object3D,smallCrates:new THREE.Object3D};for(m in h){for(w=h[m],y=w.items,s=0,d=y.length;d>s;s++)c=y[s],l=e[c.mesh].clone(),c.position&&(v=l.position).set.apply(v,c.position),c.rotation&&(g=l.rotation).set.apply(g,c.rotation),c.scale&&(x=l.scale).set.apply(x,c.scale),l.castShadow||(l.castShadow=c.castShadow),l.receiveShadow||(l.receiveShadow=c.receiveShadow),this.meshes.push(l),f[m].add(l);w.position&&(S=f[m].position).set.apply(S,w.position),this.scene.add(f[m])}for(i=f.fortress.clone(),i.rotation.y+=Math.PI,E=i.children,p=0,u=E.length;u>p;p++)o=E[p],this.meshes.push(o);return this.scene.add(i),k=new r(8e3,8e3,8e3,t.skyBox),this.scene.add(k)},e}(i),t.exports=s},function(t,e,o){var i,n,s,r=function(t,e){return function(){return t.apply(e,arguments)}},a=function(t,e){function o(){this.constructor=t}for(var i in e)h.call(e,i)&&(t[i]=e[i]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},h={}.hasOwnProperty;o(20),s=o(1),i=o(4).Bullet,n=function(t){function e(t,o){this.scene=t,this.playGround=o,this.afterKill=r(this.afterKill,this),e.__super__.constructor.call(this)}return a(e,t),e.prototype.init=function(t){return this.loadParts(s.models.ratamahatta),this.root.position.copy(t.position),this.scale=.5,this.onLoadComplete=function(t){return function(){return t.setWeapon(0),t.playGround.meshes.push(t.meshBody),t.playGround.meshes.push(t.meshWeapon),t.scene.add(t.root)}}(this)},e.prototype.onUpdate=function(t){var e;return this.root.position.copy(t.position),this.root.rotation.y=t.rotation.y+Math.PI,this.animation=t.animation,this.lastAnimation!==this.animation&&this.meshWeapon&&this.meshBody?("attack"===this.animation&&(e=new i(this.scene,t.position,t.rotation,this.playGround.meshes),e.fire()),this.lastAnimation=this.animation,this.setAnimation(this.animation)):void 0},e.prototype.onDeath=function(){return this.setAnimation("crdeath"),setTimeout(this.afterKill,640)},e.prototype.afterKill=function(){return this.setAnimation("stand")},e}(THREE.MD2Character),t.exports=n},function(t,e,o){var i,n,s,r,a=function(t,e){return function(){return t.apply(e,arguments)}},h=function(t,e){function o(){this.constructor=t}for(var i in e)c.call(e,i)&&(t[i]=e[i]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},c={}.hasOwnProperty;i=o(3),n=o(12),r=o(1).eventType,s=function(t){function e(){return this.onLeave=a(this.onLeave,this),this.onDataUpdate=a(this.onDataUpdate,this),this.onDeath=a(this.onDeath,this),this.sendUpdate=a(this.sendUpdate,this),e.__super__.constructor.apply(this,arguments)}return h(e,t),e.prototype.init=function(t){return this.socket=io.connect({path:t}),this.socket.on("data",this.onDataUpdate),this.socket.on("leave",this.onLeave),this.socket.on("death",this.onDeath),setInterval(this.sendUpdate,16)},e.prototype.pack=function(t){var e,o,i,n,s,a,h;for(e=new ArrayBuffer(41),n=new Uint8Array(e,0,20),a=new Float32Array(e,20,3),h=new Float32Array(e,32,2),o=new Uint8Array(e,40,1),s=i=0;20>=i;s=++i)n[s]=this.socket.id.charCodeAt(s);return a[0]=t.position.x,a[1]=t.position.y,a[2]=t.position.z,h[0]=t.rotation.x,h[1]=t.rotation.y,o[0]=r[t.event],e},e.prototype.unpack=function(t){var e,o,i,n,s;return o=Object.keys(r),i=new Uint8Array(t.slice(0,20)),n=new Float32Array(t.slice(20,32)),s=new Float32Array(t.slice(32,40)),e=new Uint8Array(t.slice(40,41)),{id:String.fromCharCode.apply(null,i),position:function(t,e,o){o.prototype=t.prototype;var i=new o,n=t.apply(i,e);return Object(n)===n?n:i}(THREE.Vector3,n,function(){}),rotation:function(t,e,o){o.prototype=t.prototype;var i=new o,n=t.apply(i,e);return Object(n)===n?n:i}(THREE.Vector3,s,function(){}),animation:o[e[0]]}},e.prototype.sendKill=function(t){return this.socket.emit("kill",t)},e.prototype.sendUpdate=function(){var t;if(this.controls&&this.socket.id)return t=this.pack({position:this.controls.position,rotation:this.controls.rotation,event:this.controls.animation}),this.socket.emit("data",t)},e.prototype.onDeath=function(t){var e;return t===this.socket.id?console.log(" I died "):null!=(e=this.players[t])?e.onDeath():void 0},e.prototype.onDataUpdate=function(t){var e,o,i;return e=this.unpack(t),o=e.id,o in this.players?this.players[o].onUpdate(e):(i=new n(this.scene,this.playGround),i.init(e),this.players[o]=i)},e.prototype.onLeave=function(t){var e,o,i;return t in this.players?(i=this.players[t],e=this.playGround.meshes.indexOf(i.meshBody),e&&this.playGround.meshes.splice(e,1),o=this.playGround.meshes.indexOf(i.meshWeapon),o&&this.playGround.meshes.splice(o,1),this.scene.remove(i.root),delete this.players[t]):void 0},e}(i),t.exports=s},function(t,e){e.getImageData=function(t){var e,o;return e=document.createElement("canvas"),e.width=t.width,e.height=t.height,o=e.getContext("2d"),o.drawImage(t,0,0),o.getImageData(0,0,t.width,t.height)},e.getPixel=function(t,e,o){var i,n;return n=4*(e+t.width*o),i=t.data,{r:i[n],g:i[n+1],b:i[n+2],a:i[n+3]}}},function(t){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var o=this[e];t.push(o[2]?"@media "+o[2]+"{"+o[1]+"}":o[1])}return t.join("")},t}},function(t,e,o){e=t.exports=o(15)(),e.push([t.id,"*{padding:0;margin:0}html{width:100%;height:100%}html,body{overflow:hidden}body{margin:0;padding:0}body,canvas,#blocker{width:100%;height:100%}#blocker{position:absolute;background-color:rgba(0,0,0,.5);display:table;text-align:center;cursor:pointer;color:#fff}#instructions{vertical-align:middle;display:table-cell;width:100%}#instructions span:first-child{font-size:3em;display:block}#crosshair{width:262px;height:262px;position:absolute;background-repeat:no-repeat}.ui-box{padding:10px;position:absolute;margin:10px;color:#fff;text-align:center;background:rgba(0,0,0,.5)}.ui-box div:first-child{font-size:1em}.ui-box div:last-child{font-size:3em}",""])},function(t){!function(e){function o(t,e){for(var o=t.length;o--;)if(t[o]===e)return o;return-1}function i(t,e){if(t.length!=e.length)return!1;
for(var o=0;o<t.length;o++)if(t[o]!==e[o])return!1;return!0}function n(t){for(x in E)E[x]=t[M[x]]}function s(t){var e,i,s,r,a,c;if(e=t.keyCode,-1==o(R,e)&&R.push(e),(93==e||224==e)&&(e=91),e in E){E[e]=!0;for(s in B)B[s]==e&&(h[s]=!0)}else if(n(t),h.filter.call(this,t)&&e in S)for(c=m(),r=0;r<S[e].length;r++)if(i=S[e][r],i.scope==c||"all"==i.scope){a=i.mods.length>0;for(s in E)(!E[s]&&o(i.mods,+s)>-1||E[s]&&-1==o(i.mods,+s))&&(a=!1);(0!=i.mods.length||E[16]||E[18]||E[17]||E[91])&&!a||i.method(t,i)===!1&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0))}}function r(t){var e,i=t.keyCode,n=o(R,i);if(n>=0&&R.splice(n,1),(93==i||224==i)&&(i=91),i in E){E[i]=!1;for(e in B)B[e]==i&&(h[e]=!1)}}function a(){for(x in E)E[x]=!1;for(x in B)h[x]=!1}function h(t,e,o){var i,n;i=f(t),void 0===o&&(o=e,e="all");for(var s=0;s<i.length;s++)n=[],t=i[s].split("+"),t.length>1&&(n=y(t),t=[t[t.length-1]]),t=t[0],t=b(t),t in S||(S[t]=[]),S[t].push({shortcut:i[s],scope:e,method:o,key:i[s],mods:n})}function c(t,e){var o,n,s,r,a,h=[];for(o=f(t),r=0;r<o.length;r++){if(n=o[r].split("+"),n.length>1&&(h=y(n),t=n[n.length-1]),t=b(t),void 0===e&&(e=m()),!S[t])return;for(s=0;s<S[t].length;s++)a=S[t][s],a.scope===e&&i(a.mods,h)&&(S[t][s]={})}}function p(t){return"string"==typeof t&&(t=b(t)),-1!=o(R,t)}function d(){return R.slice(0)}function u(t){var e=(t.target||t.srcElement).tagName;return!("INPUT"==e||"SELECT"==e||"TEXTAREA"==e)}function l(t){k=t||"all"}function m(){return k||"all"}function w(t){var e,o,i;for(e in S)for(o=S[e],i=0;i<o.length;)o[i].scope===t?o.splice(i,1):i++}function f(t){var e;return t=t.replace(/\s/g,""),e=t.split(","),""==e[e.length-1]&&(e[e.length-2]+=","),e}function y(t){for(var e=t.slice(0,t.length-1),o=0;o<e.length;o++)e[o]=B[e[o]];return e}function v(t,e,o){t.addEventListener?t.addEventListener(e,o,!1):t.attachEvent&&t.attachEvent("on"+e,function(){o(window.event)})}function g(){var t=e.key;return e.key=C,t}var x,S={},E={16:!1,18:!1,17:!1,91:!1},k="all",B={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},T={backspace:8,tab:9,clear:12,enter:13,"return":13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,"delete":46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},b=function(t){return T[t]||t.toUpperCase().charCodeAt(0)},R=[];for(x=1;20>x;x++)T["f"+x]=111+x;var M={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};for(x in B)h[x]=!1;v(document,"keydown",function(t){s(t)}),v(document,"keyup",r),v(window,"focus",a);var C=e.key;e.key=h,e.key.setScope=l,e.key.getScope=m,e.key.deleteScope=w,e.key.filter=u,e.key.isPressed=p,e.key.getPressedKeyCodes=d,e.key.noConflict=g,e.key.unbind=c,t.exports=h}(this)},function(t){function e(t,e){for(var o=0;o<t.length;o++){var i=t[o],s=h[i.id];if(s){s.refs++;for(var r=0;r<s.parts.length;r++)s.parts[r](i.parts[r]);for(;r<i.parts.length;r++)s.parts.push(n(i.parts[r],e))}else{for(var a=[],r=0;r<i.parts.length;r++)a.push(n(i.parts[r],e));h[i.id]={id:i.id,refs:1,parts:a}}}}function o(t){for(var e=[],o={},i=0;i<t.length;i++){var n=t[i],s=n[0],r=n[1],a=n[2],h=n[3],c={css:r,media:a,sourceMap:h};o[s]?o[s].parts.push(c):e.push(o[s]={id:s,parts:[c]})}return e}function i(){var t=document.createElement("style"),e=d();return t.type="text/css",e.appendChild(t),t}function n(t,e){var o,n,s;if(e.singleton){var h=l++;o=u||(u=i()),n=r.bind(null,o,h,!1),s=r.bind(null,o,h,!0)}else o=i(),n=a.bind(null,o),s=function(){o.parentNode.removeChild(o)};return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else s()}}function s(t,e,o){var i=["/** >>"+e+" **/","/** "+e+"<< **/"],n=t.lastIndexOf(i[0]),s=o?i[0]+o+i[1]:"";if(t.lastIndexOf(i[0])>=0){var r=t.lastIndexOf(i[1])+i[1].length;return t.slice(0,n)+s+t.slice(r)}return t+s}function r(t,e,o,i){var n=o?"":i.css;if(t.styleSheet)t.styleSheet.cssText=s(t.styleSheet.cssText,e,n);else{var r=document.createTextNode(n),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(r,a[e]):t.appendChild(r)}}function a(t,e){var o=e.css,i=e.media,n=e.sourceMap;if(n&&"function"==typeof btoa)try{o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(JSON.stringify(n))+" */",o='@import url("data:text/css;base64,'+btoa(o)+'")'}catch(s){}if(i&&t.setAttribute("media",i),t.styleSheet)t.styleSheet.cssText=o;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(o))}}var h={},c=function(t){var e;return function(){return"undefined"==typeof e&&(e=t.apply(this,arguments)),e}},p=c(function(){return/msie 9\b/.test(window.navigator.userAgent.toLowerCase())}),d=c(function(){return document.head||document.getElementsByTagName("head")[0]}),u=null,l=0;t.exports=function(t,i){i=i||{},"undefined"==typeof i.singleton&&(i.singleton=p());var n=o(t);return e(n,i),function(t){for(var s=[],r=0;r<n.length;r++){var a=n[r],c=h[a.id];c.refs--,s.push(c)}if(t){var p=o(t);e(p,i)}for(var r=0;r<s.length;r++){var c=s[r];if(0===c.refs){for(var d=0;d<c.parts.length;d++)c.parts[d]();delete h[c.id]}}}}},function(t,e,o){var i=o(16);"string"==typeof i&&(i=[[t.id,i,""]]);o(18)(i,{})},function(){THREE.MD2Character=function(){function t(t,e){for(var i=THREE.UVMapping,n=[],s=0;s<e.length;s++)n[s]=THREE.ImageUtils.loadTexture(t+e[s],i,o),n[s].name=e[s];return n}function e(t,e){t.computeMorphNormals();var o=THREE.ImageUtils.generateDataTexture(1,1,new THREE.Color(16777215)),n=new THREE.MeshPhongMaterial({color:16755200,specular:1118481,shininess:50,wireframe:!0,shading:THREE.SmoothShading,map:o,morphTargets:!0,morphNormals:!0,metal:!1}),s=new THREE.MeshPhongMaterial({color:16777215,specular:1118481,shininess:50,wireframe:!1,shading:THREE.SmoothShading,map:e,morphTargets:!0,morphNormals:!0,metal:!1});s.wrapAround=!0;var r=new THREE.MorphAnimMesh(t,s);return r.rotation.y=-Math.PI/2,r.castShadow=!0,r.receiveShadow=!0,r.materialTexture=s,r.materialWireframe=n,r.parseAnimations(),r.playAnimation(t.firstAnimation,i.animationFPS),r.baseDuration=r.duration,r}function o(){i.loadCounter-=1,0===i.loadCounter&&i.onLoadComplete()}var i=this;this.scale=1,this.animationFPS=6,this.root=new THREE.Object3D,this.meshBody=null,this.meshWeapon=null,this.skinsBody=[],this.skinsWeapon=[],this.weapons=[],this.activeAnimation=null,this.onLoadComplete=function(){},this.loadCounter=0,this.loadParts=function(n){this.loadCounter=2*n.weapons.length+n.skins.length+1;for(var s=[],r=0;r<n.weapons.length;r++)s[r]=n.weapons[r][1];this.skinsBody=t(n.baseUrl+"/",n.skins),this.skinsWeapon=t(n.baseUrl+"/",s);var a=new THREE.JSONLoader;a.load(n.baseUrl+"/"+n.body,function(t){t.computeBoundingBox();var n=e(t,i.skinsBody[0]);n.scale.set(i.scale,i.scale,i.scale),i.root.add(n),i.meshBody=n,i.activeAnimation=t.firstAnimation,o()});for(var h=function(t,n){return function(s){var r=e(s,i.skinsWeapon[t]);r.scale.set(i.scale,i.scale,i.scale),r.visible=!1,r.name=n,i.root.add(r),i.weapons[t]=r,i.meshWeapon=r,o()}},c=0;c<n.weapons.length;c++)a.load(n.baseUrl+"/"+n.weapons[c][0],h(c,n.weapons[c][0]))},this.setPlaybackRate=function(t){this.meshBody&&(this.meshBody.duration=this.meshBody.baseDuration/t),this.meshWeapon&&(this.meshWeapon.duration=this.meshWeapon.baseDuration/t)},this.setWireframe=function(t){t?(this.meshBody&&(this.meshBody.material=this.meshBody.materialWireframe),this.meshWeapon&&(this.meshWeapon.material=this.meshWeapon.materialWireframe)):(this.meshBody&&(this.meshBody.material=this.meshBody.materialTexture),this.meshWeapon&&(this.meshWeapon.material=this.meshWeapon.materialTexture))},this.setSkin=function(t){this.meshBody&&this.meshBody.material.wireframe===!1&&(this.meshBody.material.map=this.skinsBody[t])},this.setWeapon=function(t){for(var e=0;e<this.weapons.length;e++)this.weapons[e].visible=!1;var o=this.weapons[t];o&&(o.visible=!0,this.meshWeapon=o,o.playAnimation(this.activeAnimation,this.animationFPS),this.meshWeapon.baseDuration=this.meshWeapon.duration,this.meshWeapon.time=this.meshBody.time,this.meshWeapon.duration=this.meshBody.duration)},this.setAnimation=function(t){this.meshBody&&(this.meshBody.playAnimation(t,this.animationFPS),this.meshBody.baseDuration=this.meshBody.duration),this.meshWeapon&&(this.meshWeapon.playAnimation(t,this.animationFPS),this.meshWeapon.baseDuration=this.meshWeapon.duration,this.meshWeapon.time=this.meshBody.time),this.activeAnimation=t},this.update=function(t){this.meshBody&&this.meshBody.updateAnimation(1e3*t),this.meshWeapon&&this.meshWeapon.updateAnimation(1e3*t)}}}]);